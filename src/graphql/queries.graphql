# Queries
## Regular
query HomePage($locale: SiteLocale!) {
  homePage(locale: $locale) {
    id
    title
    lead
    seo {
      ...FullSEO
    }
  }

  allMarkets(locale: $locale) {
    ...FullMarket
  }

  allThemes(locale: $locale) {
    ...FullTheme
  }

  allBlogPosts(locale: $locale, first: 3) {
    ...FullBlogPost
  }
}

query MarketPage($locale: SiteLocale!, $slug: String!) {
  market(locale: $locale, filter: { slug: { eq: $slug } }) {
    ...FullMarket

    _allSlugLocales {
      locale
      value
    }
  }

  allMarkets(locale: $locale) {
    ...FullMarket
  }

  allBlogPosts(locale: $locale, first: 3) {
    ...FullBlogPost
  }
}

query ThemePage($locale: SiteLocale!, $slug: String!) {
  theme(locale: $locale, filter: { slug: { eq: $slug } }) {
    ...FullTheme

    _allSlugLocales {
      locale
      value
    }
  }

  allThemes(locale: $locale) {
    ...FullTheme
  }

  allBlogPosts(locale: $locale, first: 3) {
    ...FullBlogPost
  }
}

query BlogPage($locale: SiteLocale!) {
  blogPage(locale: $locale) {
    id
    title
    lead
    seo {
      ...FullSEO
    }
  }

  allMarkets(locale: $locale) {
    ...FullMarket
  }

  allBlogPosts(locale: $locale) {
    ...FullBlogPost
  }
}

query BlogPost($locale: SiteLocale!, $slug: String!) {
  blogPost(locale: $locale, filter: { slug: { eq: $slug } }) {
    ...FullBlogPost

    _allSlugLocales {
      locale
      value
    }
  }
}

query AboutPage($locale: SiteLocale!) {
  aboutPage(locale: $locale) {
    id
    title
    lead
  }

  allMarkets(locale: $locale) {
    ...FullMarket
  }
}

## Slugs
query AllMarketsSlugLocales {
  allMarkets {
    id
    _allSlugLocales {
      locale
      value
    }
  }
}

query AllThemesSlugLocales {
  allThemes {
    id
    _allSlugLocales {
      locale
      value
    }
  }
}

query AllBlogPostsSlugLocales {
  allBlogPosts {
    id
    _allSlugLocales {
      locale
      value
    }
  }
}

# Fragments
fragment FullSEO on SeoField {
  title
  description
  image {
    id
    url
  }
  twitterCard
}

fragment FullMarket on MarketRecord {
  id
  title
  lead
  slug
  tile {
    id
    url
  }
  blocks {
    ...DownloadTeaserBlock
    ...ExternalVideoBlock
    ...GalleryBlock
    ...IframeBlock
    ...ImageTeaserBlock
    ...MarkdownBlock
    ...SurveyBlock
  }
  seo {
    ...FullSEO
  }
}

fragment FullTheme on ThemeRecord {
  id
  title
  lead
  slug
  tile {
    id
    url
  }
  blocks {
    ...DownloadTeaserBlock
    ...ExternalVideoBlock
    ...GalleryBlock
    ...IframeBlock
    ...ImageTeaserBlock
    ...MarkdownBlock
    ...SurveyBlock
  }
  seo {
    ...FullSEO
  }
}

fragment FullBlogPost on BlogPostRecord {
  id
  title
  lead
  slug
  image {
    id
    url
  }
  blocks {
    ...DownloadTeaserBlock
    ...ExternalVideoBlock
    ...GalleryBlock
    ...IframeBlock
    ...ImageTeaserBlock
    ...MarkdownBlock
    ...SurveyBlock
  }
  markets {
    id
    title
  }
  themes {
    id
    title
  }
  _firstPublishedAt
}

# Blocks
fragment DownloadTeaserBlock on DownloadTeaserBlockRecord {
  id
  markdown
  description
  downloadTeaserAssets {
    id
    title
    file {
      id
      url
    }
  }
}

fragment ExternalVideoBlock on ExternalVideoBlockRecord {
  id
  externalVideo {
    url
    title
  }
}

fragment GalleryBlock on GalleryBlockRecord {
  id
  galleryAssets {
    id
    title
    url
  }
}

fragment IframeBlock on IframeBlockRecord {
  id
  url
}

fragment ImageTeaserBlock on ImageTeaserBlockRecord {
  id
  description
  imageTeaserAsset {
    id
    title
    alt
    url
  }
}

fragment MarkdownBlock on MarkdownBlockRecord {
  id
  content
}

fragment SurveyBlock on SurveyBlockRecord {
  id
  formUrl
  question {
    id
    question
    formFieldId
    isMultipleChoice
    possibleAnswers {
      id
      answer
    }
  }
}
