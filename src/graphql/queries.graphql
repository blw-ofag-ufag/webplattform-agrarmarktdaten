# Queries
## Regular
query HomePage($locale: SiteLocale!) {
  homePage(locale: $locale) {
    _allSlugLocales {
      locale
      value
    }
    id
    title
    lead
    hero {
      url
    }
    seo {
      ...FullSEO
    }
    markets {
      id
      title
      slug
    }

    focusArticles {
      id
      title
      slug
    }
  }

  allMarketArticles(locale: $locale) {
    ...SimpleMarketArticle
  }

  allFocusArticles(locale: $locale) {
    ...SimpleFocusArticle
  }

  topBlogPosts: allBlogPosts(locale: $locale, first: 3) {
    ...SimpleBlogPost
  }
}

query LegalPage($locale: SiteLocale!) {
  legalPage(locale: $locale) {
    title
    slug
    lead
    content {
      content
    }
  }

  allMarketArticles(locale: $locale) {
    ...SimpleMarketArticle
  }

  allFocusArticles(locale: $locale) {
    ...SimpleFocusArticle
  }
}

query TermsPage($locale: SiteLocale!) {
  termsPage(locale: $locale) {
    title
    slug
    lead
    content {
      content
    }
  }

  allMarketArticles(locale: $locale) {
    ...SimpleMarketArticle
  }

  allFocusArticles(locale: $locale) {
    ...SimpleFocusArticle
  }
}

query MarketPage($locale: SiteLocale!, $slug: String!) {
  marketArticle(locale: $locale, filter: { slug: { eq: $slug } }) {
    _allSlugLocales {
      locale
      value
    }
    ...FullMarketArticle
  }

  allMarketArticles(locale: $locale) {
    ...SimpleMarketArticle
  }

  allFocusArticles(locale: $locale) {
    ...SimpleFocusArticle
  }

  topBlogPosts: allBlogPosts(locale: $locale, first: 3) {
    ...SimpleBlogPost
  }
}

query FocusArticlePage($locale: SiteLocale!, $slug: String!) {
  focusArticle(locale: $locale, filter: { slug: { eq: $slug } }) {
    _allSlugLocales {
      locale
      value
    }
    ...FullFocusArticle
  }

  allMarketArticles(locale: $locale) {
    ...SimpleMarketArticle
  }

  allFocusArticles(locale: $locale) {
    ...SimpleFocusArticle
  }

  topBlogPosts: allBlogPosts(locale: $locale, first: 3) {
    ...SimpleBlogPost
  }
}

query MethodsPage($locale: SiteLocale!) {
  methodsPage(locale: $locale) {
    _allSlugLocales {
      locale
      value
    }
    id
    title
    lead
    seo {
      ...FullSEO
    }
    content {
      __typename
      ...DownloadTeaserBlock
      ...ExternalVideoBlock
      ...GalleryBlock
      ...IframeBlock
      ...ImageTeaserBlock
      ...MarkdownBlock
      ...SurveyBlock
    }
  }

  allMarketArticles(locale: $locale) {
    ...SimpleMarketArticle
  }

  allFocusArticles(locale: $locale) {
    ...SimpleFocusArticle
  }

  topBlogPosts: allBlogPosts(locale: $locale, first: 3) {
    ...SimpleBlogPost
  }
}

query AnalysisPage($locale: SiteLocale!) {
  analysisPage(locale: $locale) {
    id
    title
    lead
    seo {
      ...FullSEO
    }
  }

  allMarketArticles(locale: $locale) {
    ...SimpleMarketArticle
  }

  allFocusArticles(locale: $locale) {
    ...SimpleFocusArticle
  }

  allBlogPosts(locale: $locale, first: 7) {
    ...SimpleBlogPost
  }
}

query BlogPost($locale: SiteLocale!, $slug: String!) {
  blogPost(locale: $locale, filter: { slug: { eq: $slug } }) {
    ...FullBlogPost

    _allSlugLocales {
      locale
      value
    }
  }

  allMarketArticles(locale: $locale) {
    ...SimpleMarketArticle
  }

  allFocusArticles(locale: $locale) {
    ...SimpleFocusArticle
  }

  topBlogPosts: allBlogPosts(locale: $locale, first: 3) {
    ...SimpleBlogPost
  }
}

query AllPowerBIReports($locale: SiteLocale!) {
  allPowerBiReports(locale: $locale) {
    id
    reportId
    dataset {
      datasetId
    }
    workspace {
      workspaceId
    }
  }
}

## Slugs
query AllMarketArticlesSlugLocales {
  allMarketArticles {
    id
    _allSlugLocales {
      locale
      value
    }
  }
}

query AllFocusArticlesSlugLocales {
  allFocusArticles {
    id
    _allSlugLocales {
      locale
      value
    }
  }
}

query AllBlogPostsSlugLocales {
  allBlogPosts {
    id
    _allSlugLocales {
      locale
      value
    }
  }
}

# Fragments
fragment FullSEO on SeoField {
  title
  description
  image {
    id
    url
  }
  twitterCard
}

fragment SimpleMarketArticle on MarketArticleRecord {
  id
  title
  slug
}

fragment SimpleFocusArticle on FocusArticleRecord {
  id
  title
  slug
}

fragment FullMarketArticle on MarketArticleRecord {
  id
  title
  slug
  lead
  blocks {
    __typename
    ...DownloadTeaserBlock
    ...ExternalVideoBlock
    ...GalleryBlock
    ...IframeBlock
    ...ImageTeaserBlock
    ...MarkdownBlock
    ...SurveyBlock
  }
  seo {
    ...FullSEO
  }
}

fragment FullFocusArticle on FocusArticleRecord {
  id
  title
  slug
  lead
  blocks {
    __typename
    ...DownloadTeaserBlock
    ...ExternalVideoBlock
    ...GalleryBlock
    ...IframeBlock
    ...ImageTeaserBlock
    ...MarkdownBlock
    ...SurveyBlock
  }
  seo {
    ...FullSEO
  }
}

fragment SimpleBlogPost on BlogPostRecord {
  id
  title
  slug
  lead
  image {
    id
    url
    alt
  }
  markets {
    title
    slug
  }
  focusArticles {
    title
    slug
  }
  _firstPublishedAt
}

fragment FullBlogPost on BlogPostRecord {
  id
  title
  lead
  slug
  authors {
    firstName
    lastName
    portrait {
      id
      url
    }
  }
  image {
    id
    url
  }
  blocks {
    ...DownloadTeaserBlock
    ...ExternalVideoBlock
    ...GalleryBlock
    ...IframeBlock
    ...ImageTeaserBlock
    ...MarkdownBlock
    ...SurveyBlock
  }
  markets {
    id
    title
    slug
  }
  focusArticles {
    id
    title
    slug
  }
  _firstPublishedAt
}

# Blocks
fragment DownloadTeaserBlock on DownloadTeaserBlockRecord {
  id
  markdown
  description
  downloadTeaserAssets {
    id
    title
    file {
      id
      url
    }
  }
}

fragment ExternalVideoBlock on ExternalVideoBlockRecord {
  id
  externalVideo {
    url
    title
  }
}

fragment GalleryBlock on GalleryBlockRecord {
  id
  galleryAssets {
    id
    title
    url
  }
}

fragment IframeBlock on IframeBlockRecord {
  id
  url
}

fragment ImageTeaserBlock on ImageTeaserBlockRecord {
  id
  description
  imageTeaserAsset {
    id
    title
    alt
    url
  }
}

fragment MarkdownBlock on MarkdownBlockRecord {
  id
  content
}

fragment SurveyBlock on SurveyBlockRecord {
  id
  formUrl
  question {
    id
    question
    formFieldId
    isMultipleChoice
    possibleAnswers {
      id
      answer
    }
  }
}
